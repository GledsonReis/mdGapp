<p id="notice"><%= notice %></p>

<h1>Posts</h1>
<div class="d-flex">
  <% @posts.each do |post| %>
    <div class="card post-card m-1">
      <div class="card-header d-flex justify-content-between p-0">
        <div class="post-title d-flex">
          <%= post.user.avatar.present? ? image_tag(post.user.avatar, size: "30x30", class: "rounded-circle mx-2 align-self-center") : image_tag(asset_path("user.png"), size: "30x30", class: "rounded-circle mx-2 align-self-center") %> 
          <div class="align-self-start my-1">
            <p class="mb-0"><%= post.user.username %></p>
            <span class="text-muted"><%= time_ago_in_words(post.created_at) %></span>
          </div>
        </div>
        <div class="dropdown my-auto">
          <a class="btn btn-link text-decoration-none" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-ellipsis-v"></i>
          </a >
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
            <%= link_to post, class: "dropdown-item" do %>
              Show
            <% end %>
            <%= link_to edit_post_path(post), class: "dropdown-item" do %>
              Editar
            <% end %>
            <%= link_to post, method: :delete, data: { confirm: 'Are you sure?' }, class: "dropdown-item" do %>
              Excluir
            <% end %>
          </div>
        </div>
      </div>
      <div class="card-body">
        <h4><%= post.title %></h4>
        <hr>
        <p><%= post.content %></p>
      </div>
    </div>
  <% end %>
</div>
<br>

<%= link_to 'New Post', new_post_path, class: "btn btn-blue" %>
